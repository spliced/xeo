xeo={},xeo.id=(a=>a),xeo.exec=function(a,b,c){if(!(a&&a instanceof Array))return"Error: Array required as first parameter.";let e=(a.every(a=>+a),b.split(" ").reverse()),f=e.map(a=>{let b="";return a.replace(":","").split("").map(a=>this[b+=a]?b:null).filter(a=>a)}),g=e.map((a,b)=>a.replace(":","").replace(f[b],"").split(",").filter(a=>a));return f.forEach((b,c)=>{const d=e[c].match(":")?"filter":"map",f=this[b],h=g[c].map(a=>+a||a);a=a[d](a=>f(a,...h))}),c?a.every(a=>+a)||a.every(a=>"boolean"==typeof a)?a.reduce((a,b)=>a+b):a.every(a=>"string"==typeof a)?a.join(" "):a.every(a=>Array.isArray(a))?(r=[],a.map(a=>r.push(...a)),r):a.every(a=>a instanceof Map||a instanceof WeakMap)?(m=[],a.map(a=>m.push(...a.entries())),new Map(m)):a.every(a=>a instanceof Set||a instanceof WeakSet)?(o=[],a.map(a=>o.push(...a.values())),new Set(o)):Object.assign(...a):a},xeo.def=function(a,b){let c=a.split(""),e=c.map((a,b)=>this[c.slice(0,b+1)]);return(e=e.filter(a=>void 0!==a).length>0)?void console.log("Invalid Name, function not added."):void(this[a]=function(a,...c){let d="object"!=typeof a?typeof a:a instanceof Array?"array":a instanceof Map||a instanceof WeakMap?"map":a instanceof Set||a instanceof WeakSet?"set":a instanceof Object?"object":null;return b[d](a,c)})},xeo.def("+",{number:(a,b)=>b.reduce((a,b)=>a+b)+a,string:(a,b)=>`${a} ${b.join(" ")}`,array:(a,b)=>[...a,...b],map:(a,b)=>{return b.map(a=>a.split("=")).forEach(b=>a.set(b[0],+b[1]||b[1])),a},set:(a,b)=>{return b.forEach(b=>a.add(b)),a},object:(a,b)=>{return b.map(a=>a.split("=")).forEach(b=>a[b[0]]=+b[1]||b[1]),a}}),xeo.def("-",{number:(a,b)=>a-b.reduce((a,b)=>a-b),string:(a,b)=>{return b.forEach(b=>a=new RegExp(b,"g")[Symbol.replace](a,"")),a},array:(a,b)=>a.filter(a=>!b.some(b=>b===a)),map:(a,b)=>{return b.forEach(b=>a.delete(b)),a},set:(a,b)=>{return b.forEach(b=>a.delete(b)),a},object:(a,b)=>{return b.forEach(b=>delete a[b]),a}}),xeo.def("*",{number:(a,b)=>b.reduce((a,b)=>a*b)*a,string:(a,b)=>Array(+b).fill(a).join(" "),array:(a,b)=>{for(r=[];b-- >0;)r.push(...a);return r},map:(a,b)=>this.c(a),set:(a,b)=>this.c(a),object:(a,b)=>this.c(a)}),xeo.def("/",{number:(a,b)=>a/b,string:(a,b)=>{let c=[],d=()=>a.length>=b?(c.push(a.slice(0,b)),a=a.slice(b),d()):c;return d()},array:(a,b)=>{let c=[],d=()=>a.length>=b?(c.push(a.slice(0,b)),a=a.slice(b),d()):c;return d()},map:(a,b)=>xeo.id(a),set:(a,b)=>xeo.id(a),object:(a,b)=>xeo.id(a)}),xeo.def("%",{number:(a,b)=>a%b,string:(a,b)=>a.slice(a.length-a.length%b),array:(a,b)=>a.slice(a.length-a.length%b),map:(a,b)=>xeo.id(a),set:(a,b)=>xeo.id(a),object:(a,b)=>xeo.id(a)}),xeo.def("&+",{number:a=>a+1,string:(a,b)=>xeo.id(a),array:(a,b)=>[...a,""],map:(a,b)=>xeo.id(a),set:(a,b)=>xeo.id(a),object:(a,b)=>xeo.id(a)}),xeo.def("&-",{number:(a,b)=>a-1,string:(a,b)=>a.slice(0,-1),array:(a,b)=>a.slice(0,-1),map:(a,b)=>xeo.id(a),set:(a,b)=>xeo.id(a),object:(a,b)=>xeo.id(a)}),xeo.def("==",{number:(a,b)=>a==b,string:(a,b)=>a==b,array:(a,b)=>a.length==b,map:(a,b)=>[...a.keys()].length==b,set:(a,b)=>[...a.values()].length==b,object:(a,b)=>xeo.id(a)}),xeo.def("!=",{number:(a,b)=>a!=b,string:(a,b)=>a!=b,array:(a,b)=>a.length!=b,map:(a,b)=>[...a.keys()].length!=b,set:(a,b)=>[...a.values()].length!=b,object:(a,b)=>xeo.id(a)}),xeo.def(">",{number:(a,b)=>a>b,string:(a,b)=>a.length>b,array:(a,b)=>a.length>b,map:(a,b)=>[...a.keys()].length>b,set:(a,b)=>[...a.values()].length>b,object:(a,b)=>xeo.id(a)}),xeo.def("<",{number:(a,b)=>a<b,string:(a,b)=>a.length<b,array:(a,b)=>a.length<b,map:(a,b)=>[...a.keys()].length<b,set:(a,b)=>[...a.values()].length<b,object:(a,b)=>xeo.id(a)}),xeo.def("=>",{number:(a,b)=>a>=b,string:(a,b)=>a.length>=b,array:(a,b)=>a.length>=b,map:(a,b)=>[...a.keys()].length>=b,set:(a,b)=>[...a.values()].length>=b,object:(a,b)=>xeo.id(a)}),xeo.def("=<",{number:(a,b)=>a<=b,string:(a,b)=>a.length<=b,array:(a,b)=>a.length<=b,map:(a,b)=>[...a.keys()].length<=b,set:(a,b)=>[...a.values()].length<=b,object:(a,b)=>xeo.id(a)}),xeo.def("~",{number:(a,b)=>xeo.id(a),string:(a,b)=>a.length,array:(a,b)=>a.length,map:(a,b)=>[...a.keys()].length,set:(a,b)=>[...a.values()].length,object:(a,b)=>xeo.id(a)}),xeo.def("@",{number:(a,b)=>xeo.id(a),string:(a,b)=>b.map(b=>a[b]),array:(a,b)=>b.map(b=>a[b]),map:(a,b)=>b.map(b=>a.get(b)),set:(a,b)=>xeo.id(a),object:(a,b)=>b.map(b=>a[b])});
